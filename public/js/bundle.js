!function(e){var t={};function i(s){if(t[s])return t[s].exports;var o=t[s]={i:s,l:!1,exports:{}};return e[s].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=e,i.c=t,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(s,o,function(t){return e[t]}.bind(null,o));return s},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=0)}([function(e,t,i){"use strict";i.r(t),window.AB||(window.AB={}),window.AB.components||(window.AB.components={});var s=new class{constructor(){this.store={}}register(e,t){if(e in Object.keys(this.store))throw new Error(`${e} is already registered`);this.store[e]=t,window.AB.components[e]=e}get(e){return this.store[e]}};function o(e,t,i,s){const o=function(e){const t=function(e,t){if("function"==typeof e.closest)return e.closest(t);const i=document.querySelectorAll(t);for(let t=0;t<i.length;t++){let s=e;for(;s;){if(i[t]===s)return s;s=s.parentElement}}}(e.target,i);e.delegateTarget=t,t&&s.call(null,e)};return e.addEventListener(t,o),function(){e.removeEventListener(t,o)}}window.AB||(window.AB={});class r{constructor(e,t){this.root=e,this.props=t||{},this.handlers=null,this.selectors={},this.modifiers={},this._removeHandlersMap={}}setState(e){if(!this.state)throw new Error("\n                You are trying to update a state that wasn't initialised yet.\n                Create it in the init method of your component first e.g. this.state = { foo: 'bar' };\n            ");this.state=Object.assign({},this.state,e)}_toggleHandlers(e){const t=this.handlers,i=this.selectors;t&&Object.keys(t).forEach(s=>{const r=s.split("@"),n=r[0],l=r[1];if(!n||!l)throw new Error("Wrong syntax for component");const c=t[s].bind(this);let h;if("window"===n&&(h=window),"root"===n&&(h=this.root),h){return void h[e?"addEventListener":"removeEventListener"](l,c)}const a=i[n];if(!a)throw new Error("Selector for element not found");if(e)"scroll"===l?this.root.querySelector(a).addEventListener(l,c):this._removeHandlersMap[s]=o(this.root,l,a,c);else if("scroll"===l)this.root.querySelector(a).removeEventListener(l,c);else{const e=this._removeHandlersMap[s];e&&e()}})}onMount(){}onUnmount(){}mount(){this._toggleHandlers(!0),this.onMount()}unmount(){this._toggleHandlers(!1),this.onUnmount()}}function n(e,t,i){return new(s.get(e))(t,i)}function l(e){(e||document.body).querySelectorAll("[data-component]").forEach(e=>{e.getAttribute("data-component").split(",").forEach(t=>{if(!t)return;n(t,e).mount()})})}window.AB.getInstance=n,window.AB.initComponents=l;s.register("TimedMenu",class extends r{constructor(e){super(e),this._handleClose=(()=>{const e=this.root.classList,t=this.modifiers.contentActive;this.state.layoutActive&&(this.items.forEach(e=>e.classList.remove(this.modifiers.itemSelected)),e.remove(t),this.setState({layoutActive:!1}),this._setNextActive(),this._startTimer())}),this._handleMoreClick=(e=>{e.preventDefault(),this.choose(this.state.activeIndex)}),this._handleItemClick=(e=>{e.preventDefault();const t=e.delegateTarget,i=Array.prototype.slice.call(this.items).indexOf(t);this.choose(i)}),this.choose=(e=>{const t=this.items[e];this.items.forEach(e=>e.classList.remove(this.modifiers.itemSelected,this.modifiers.itemActive)),this.contents.forEach(e=>e.classList.remove(this.modifiers.typeActive)),clearInterval(this.timer),this.setState({layoutActive:!0,activeIndex:e}),t.classList.add(this.modifiers.itemSelected,this.modifiers.itemActive),this.root.classList.add(this.modifiers.contentActive),this.contents[e].classList.add(this.modifiers.typeActive),this._initSlider(e)}),this._handleSliderPrev=(e=>{e.preventDefault(),this.instances[this.state.activeSliderIndex]&&this.instances[this.state.activeSliderIndex].setPreviousSlide()}),this._handleSliderNext=(e=>{e.preventDefault(),this.instances[this.state.activeSliderIndex]&&this.instances[this.state.activeSliderIndex].setNextSlide()}),this._initSlider=(e=>{null!==this.state.activeSliderIndex&&(this.sliderPrev.removeEventListener("click",this._handleSliderPrev),this.sliderNext.removeEventListener("click",this._handleSliderNext));const t=!this.instances[e];if(t){const t=this.sliders[e];this.instances[e]=window.AB.getInstance("ContentSlider",t)}this.setState({activeSliderIndex:e}),this.sliderPrev.addEventListener("click",this._handleSliderPrev),this.sliderNext.addEventListener("click",this._handleSliderNext),t&&this.instances[e].mount()}),this._setActive=(e=>{const t=this.items[e],i=this.items[this.state.activeIndex];this.setState({activeIndex:e}),this.items.forEach(e=>e.classList.remove(this.modifiers.itemActive)),this.sections.forEach(e=>e.classList.remove(this.modifiers.sectionActive)),i&&(i.querySelector(this.selectors.progress).style.width=0),t.classList.add(this.modifiers.itemActive),setTimeout(()=>t.querySelector(this.selectors.progress).style.width="100%",0),this.sections[e].classList.add(this.modifiers.sectionActive)}),this._setNextActive=(()=>{const e=this.state.activeIndex,t=this.items.length;this._setActive(e===t-1?0:e+1)}),this._startTimer=(()=>{this.timer=setInterval(this._setNextActive,this.state.timeout)}),this.selectors={item:".js-timed-menu__item",progress:".js-timed-menu__progress",section:".js-timed-menu__section",more:".js-timed-menu__more",close:".js-timed-menu__close",contentType:".js-timed-menu__content-type",slider:".js-content-slider",sliderPrev:".js-timed-menu__slider-prev",sliderNext:".js-timed-menu__slider-next"},this.state={layoutActive:!1,activeIndex:0,activeSliderIndex:null,timeout:6e3},this.modifiers={contentActive:"layout_active",itemActive:"menu__item_active",itemSelected:"menu__item_selected",sectionActive:"layout__previews-section_active",typeActive:"layout__content-type_active"},this.handlers={"more@click":this._handleMoreClick,"close@click":this._handleClose,"item@click":this._handleItemClick},this.items=e.querySelectorAll(this.selectors.item),this.sections=e.querySelectorAll(this.selectors.section),this.contents=e.querySelectorAll(this.selectors.contentType),this.sliders=e.querySelectorAll(this.selectors.slider),this.sliderPrev=e.querySelector(this.selectors.sliderPrev),this.sliderNext=e.querySelector(this.selectors.sliderNext),this.timer=null,this.instances=[]}onMount(){this._setActive(0),this._startTimer()}});s.register("ContentSlider",class extends r{constructor(e){super(e),this._handleScroll=(()=>{const e=this.scroll.clientHeight,t=this.scroll.scrollTop,i=Math.floor(t/e);i!==this.state.activeIndex&&this.setState({activeIndex:i})}),this._handleControlClick=(e=>{e.preventDefault();const t="next"===e.delegateTarget.getAttribute("data-direction")?1:-1,i=this.state.activeIndex+t;this.setSlide(i)}),this._handleReset=(()=>{0!==this.state.activeIndex&&this.setSlide(0)}),this._handleKeyDown=(e=>{switch(e.which){case 40:e.preventDefault(),this.setNextSlide();break;case 38:e.preventDefault(),this.setPreviousSlide()}}),this.setNextSlide=(()=>{this.setSlide(this.state.activeIndex+1)}),this.setPreviousSlide=(()=>{this.setSlide(this.state.activeIndex-1)}),this.setSlide=(e=>{const t=this.items[e];t&&(e<0||e>this.items.length-1||(t.scrollIntoView({behavior:"smooth"}),this.setState({activeIndex:e})))}),this.selectors={scroll:".js-content-slider__scroll",item:".js-content-slider__item",control:".js-content-slider__control",reset:".js-content-slider__reset"},this.state={activeIndex:0,id:Math.random()},this.handlers={"control@click":this._handleControlClick,"reset@click":this._handleReset,"window@keydown":this._handleKeyDown,"scroll@scroll":this._handleScroll},this.items=this.root.querySelectorAll(this.selectors.item),this.scroll=this.root.querySelector(this.selectors.scroll)}onMount(){}});const c=e=>`\n    <div class="viewer__action-title">${e.title}</div>\n    <div class="viewer__action-text">${e.description}</div>\n`,h=e=>{if(e.video)return`\n            <div class="viewer__video">\n                  <img class="viewer__video-holder" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" />\n                  <iframe src="${e.video}?autoplay=1&muted=1" width="100%" height="100%" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>\n            </div>\n        `;let t="";return e.photos.forEach((e,i)=>{t+=`<img class="viewer__src js-gallery__src ${!i&&"viewer__src_active"}" src="${e}" />`}),t};s.register("Gallery",class extends r{constructor(e){super(e),this._handleKeyDown=(e=>{if(this.state.active)switch(e.which){case 37:this._handlePrevClick(e);break;case 39:this._handleNextClick(e);break;case 27:e.preventDefault(),this.toggle(!1)}}),this._handleActionClick=(e=>{e.preventDefault(),this.toggleAction()}),this._handleClose=(e=>{e.preventDefault(),this.toggle(),this.toggleAction(!1)}),this._handlePreviewClick=(e=>{e.preventDefault();const t=JSON.parse(e.delegateTarget.getAttribute("data-post"));this.post=t,this.info.innerHTML=c(t),this.media.innerHTML=h(t),this.viewer.classList.remove(this.modifiers.typePhoto,this.modifiers.typeVideo),this.viewer.classList.add(t.video?this.modifiers.typeVideo:this.modifiers.typePhoto),this.photos=this.media.querySelectorAll(this.selectors.src),this.setActivePhoto(0),this.toggle()}),this._handlePrevClick=(e=>{e.preventDefault();const t=this.state.activeIndex-1;this.setActivePhoto(t<0?this.photos.length-1:t)}),this._handleNextClick=(e=>{e.preventDefault();const t=this.state.activeIndex+1;this.setActivePhoto(t>this.photos.length-1?0:t)}),this.setActivePhoto=(e=>{this.post&&this.post.photos&&this.photos&&(this.photos.forEach(e=>e.classList.remove(this.modifiers.photoActive)),this.photos[e].classList.add(this.modifiers.photoActive),this.setState({activeIndex:e}))}),this.toggle=(e=>{const t=void 0!==e?e:!this.state.active;this.viewer.classList[t?"add":"remove"](this.modifiers.active),this.setState({active:t})}),this.toggleAction=(e=>{const t=void 0!==e?e:!this.state.actionActive;this.action.classList[t?"add":"remove"](this.modifiers.actionActive),this.setState({actionActive:t})}),this.selectors={preview:".js-gallery__preview",viewer:".js-gallery__viewer",close:".js-gallery__close",action:".js-gallery__action",actionButton:".js-gallery__action-button",actionInfo:".js-gallery__info",media:".js-gallery__media",prev:".js-gallery__prev",next:".js-gallery__next",src:".js-gallery__src"},this.modifiers={active:"viewer_active",actionActive:"viewer__action_active",typePhoto:"viewer_photo",typeVideo:"viewer_video",photoActive:"viewer__src_active",controlHidden:"viewer__control_hidden"},this.state={active:!1,actionActive:!1,activeIndex:0},this.handlers={"close@click":this._handleClose,"preview@click":this._handlePreviewClick,"actionButton@click":this._handleActionClick,"prev@click":this._handlePrevClick,"next@click":this._handleNextClick,"window@keydown":this._handleKeyDown},this.viewer=e.querySelector(this.selectors.viewer),this.action=e.querySelector(this.selectors.action),this.info=e.querySelector(this.selectors.actionInfo),this.media=e.querySelector(this.selectors.media),this.prev=e.querySelector(this.selectors.prev),this.next=e.querySelector(this.selectors.next)}onMount(){}}),l()}]);